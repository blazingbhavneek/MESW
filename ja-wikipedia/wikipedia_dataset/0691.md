# アナログ-デジタル変換回路

アナログ-デジタル変換回路（アナログ-デジタルへんかんかいろ、A/D変換回路）は、マイクが受け取った音声信号やアンテナに入力された電波またはデジタルカメラに入力された光といったアナログ電気信号をデジタル電気信号に変換する電子回路である。デジタル化された信号はCPUといったデジタル信号処理回路で処理可能となるため、センシング及び通信システムに必須となる電子回路である。A/Dコンバーター（ADC（エーディーシー）、英語: Analog-to-digital converter）とも言う。
また、アナログ-デジタル変換（アナログ-デジタルへんかん、A/D変換）は、アナログ信号をデジタル信号に変換することをいう。
逆はデジタル-アナログ変換回路である。

変調方式の一種として見た場合は、A/D変換はパルス符号変調である。A/D変換のような操作をデジタイズということがある。
基本的なA/D変換の操作は、まずサンプリング周波数で入力を標本化し、それを量子化することでおこなう。標本化にともなう折り返し雑音は、重要な問題である。また、量子化にともなう量子化誤差による量子化雑音もある。

原理
「比較器」とは、入力電圧を基準電圧と比較して、基準より高いか低いかを出力する回路であり、1bitのAD変換器と言える。

フラッシュ型（並列比較型）
n
      
    
    {\displaystyle n}
  
 bit出力のAD変換であれば、
  
    
      
        
          2
          
            n
          
        
        −
        1
      
    
    {\displaystyle 2^{n}-1}
  
個の比較器を用意して変換を行う。たとえば0Vから15Vまで1V間隔でAD変換して4bit出力を得る場合であれば、1Vから15Vまで15個の比較器を用意して入力と比較を行い、必要があればそれらの出力を2進数にエンコードする。
原理が単純であり、比較器の動作だけで結果が出るので高速である。しかしビット数が増えると比較器の数が急激に増える。

逐次比較型およびパイプライン型
正確な n bit DA変換器の出力は
  
    
      
        
          2
          
            n
          
        
      
    
    {\displaystyle 2^{n}}
  
個の電圧の基準になる。つまりDA変換器出力を入力電圧と比較する事で n bitのAD変換を実現できる。1回の比較で1bitずつ精度を上げる事が出来るので、 n bitの場合は n 回の比較で結果が得られる。比較器1つを繰り返し用いて n 回の比較を行い正確な値に近づける方法が逐次比較型、パイプライン処理のように n 段階の回路構成で処理する場合がパイプライン型である。
この他に、上位半分用と下位半分用のフラッシュ型および上位半分に相当するDA変換器を用意して、2段階に分けて変換する方法などがある。この場合でも完全なフラッシュ型と比べれば比較器の数を大幅に削減できる。
1回の変換のために何度も入力を参照する必要があり、その間に入力電圧が変動すると誤変換をしてしまう。そのため、変換が完了するまでの一定時間だけ入力電圧を固定する回路（サンプルアンドホールド回路）が必要となる。

傾斜型および追従型
のこぎり波を常時発生させておき、入力電圧と比較する。その上で、のこぎり波の立ち上がりの時点から、のこぎり波の電圧が入力電圧と一致するまでの時間を計測する（傾斜型）。
のこぎり波の代わりに、必要な精度のDA変換器とカウンタにより生成した階段状波形と入力電圧とを比較する場合もある（追従型）。この場合は入力電圧を超えた時点のカウンタ値を採用すればよい。
回路は簡単かつ小規模であるが、遅い。DA変換器を用いる追従型の場合、同じくDA変換器の出力と入力電圧との比較を行う逐次比較型と比べれば、その遅さは明らかである。また、サンプルアンドホールド回路で入力を固定せず入力が変動すると、サンプリングのタイミングが不均等になる。

VF変換型
入力電圧をコンデンサに充電するマルチバイブレータを用いて矩形波を発生させる。入力電圧を積分し、一定電圧になった時に動作を反転させ、そのタイミングでパルスを切り替えて矩形波を作るが、この矩形波の周波数(F)は入力電圧(V)に比例する。必要な場合はこれをカウントする。
傾斜型では、一定電圧の積分であるのこぎり波と入力を比較して時間を計測しており、時間対周波数という観点も含めて、逆の方法と言える。

二重積分型（二重傾斜型）
まず入力電圧を一定時間積分する。その後に逆符号の基準電圧で積分して、積分値が0になるまでの時間を計測する。これにより入力電圧と基準電圧の比を、時間の比として計測できる。
入力電圧の充電と基準電圧の放電という二つの操作を同じ回路で行う事で、回路に含まれる誤差（ノイズ）をキャンセルすることができて高精度が得やすい。一方で複雑なアナログ回路になり、積分時間がかかることもあり、高速化しにくい。
積分回路を用いるので一種の平均化が行われる。別の言い方をすると回路自体が1次ローパスフィルタであり、ある程度高い周波数成分はカットされるので、アンチエイリアスフィルタが不要な場合もある。しかしナイキスト周波数付近でも中途半端に減衰されるので、ナイキスト周波数ギリギリまで用いる用途にはあまり向かない。

ウィルキンソン型
パルス状入力信号のピーク値、またはパルスの総電荷を計測するために、核物理学者のD.H.Wilkinsonが考案した方法である。
ピーク値測定の場合は入力をコンデンサに接続し、ピーク判定をした時点で接続を切る（一種のピークホールド回路になっている）。総電荷の場合は入力を積分回路に接続し、パルスが完了した時点で接続を切る。その後に充電したコンデンサを定電流で放電し、コンデンサの電圧が0になるのに要する時間を測定する。

デルタ・シグマ型
もっとも簡単な、量子化を1bit（比較器）で行う1次デルタ・シグマ・モジュレータの場合で説明する。

入力は1bitでAD変換され、この結果は+1と-1の列からなる。しかし積分器により量子化誤差が蓄積されていくので、入力を単純に1bit AD変換した値とは異なる値の列が出る。入力の変化が遅い場合、例えば入力が0Vであれば+1と-1が交互にほぼ等しい回数出力され、高い電圧ならば+1が多くなる等、+1と-1の個数の比が入力電圧に比例するように出力される。つまり一種のディザ化を行っている。この+1と-1の個数をmステップ分だけ数えれば、それに応じたbit数のAD変換となる。
1 bit AD変換なので各瞬間での量子化誤差は非常に大きいが、変換時間と比較して十分長い時間での平均出力で見れば、誤差を帰還させているので誤差をなくすよう動作する。これにより、高いサンプリング周波数の低ビットAD変換を用いて、低いサンプリング周波数の高ビットAD変換を実現している。あるいは「mステップ分だけ数えた後の結果」という最終的なAD変換のサンプリング周波数から見ると、1bitのAD変換器はそのm倍のサンプリング周波数で変換を行っている、すなわちオーバーサンプリングを行っている。
ここで見方を変えると、この回路は量子誤差を帰還させる一種のフィルタになっている。実際この回路は、入力信号に対しては1次ローパスフィルタ、量子化誤差に対しては1次ハイパスフィルタになっている。入力信号では、最終的なナイキスト周波数以下の部分が必要であり、高い周波数成分は除去したい。一方量子化誤差に起因するノイズは出来るだけ除去したいが、これはフィルタにより高い周波数帯に残っている（上記の0Vの例では+1と-1の交互列、すなわちオーバーサンプリングのナイキスト周波数で出力されている）。そこで、1bitオーバーサンプリングで量子化された出力に対しデジタルフィルタを適用し、量子化ノイズを可能な限り除去して、目的のbit数とサンプリング周波数の出力に仕立てる。上記の「mステップ分だけ数える（連続したmステップのデータを単純平均する）」というのも、一種のデジタルフィルタになっている。
実際にはもっと複雑な帰還をかけて高次のデルタ・シグマ・モジュレータを構成し、フィルタとしての特性を急峻にする。
しかし他の方式のAD変換及びアンチエイリアスフィルタと比べるとアナログ回路部分は簡単であり、その分デジタル回路で処理する部分が増える。

AD変換器の性能表示
AD変換器の性能を表示するため、以下のような項目がある。

分解能
測定可能な最大値（または最大値と最小値の幅、フルスケール）が、離散化の最小単位でみていくつになるかを表したもので、通常は2進数の桁数（すなわちビット）で表示する。ただしデジタル電圧計など目読する場合は10進数の桁数などで表す。いわば表示可能桁数であるが、他の要因の誤差があるので必ずしも有効桁数とは言えない。

誤差
理想的なAD変換をグラフで表示すると、原点を通る傾き一定の階段状であり（量子化誤差を除けば直線であり）、フルスケールが指定値通りとなる。
しかし現実にはこれからずれており、それを許容誤差として表示する必要がある。
誤差の表示方法としては、平均直線からのずれ（積分非線形性誤差）、部分的な傾きのずれ（微分非線形性誤差）、原点やフルスケールでのずれ、これらの温度依存性などがある。

変換時間とサンプリング周波数
入力がデジタルに変換されて出力として現れるまでの時間、または変換開始のための合図を入力して結果が出るまでの時間が変換時間である。
一方、サンプリング周波数は1秒間に変換（測定）を行う回数であり、時間方向の分解能と呼べるものである。単純な構造であればサンプリング周波数は変換時間の逆数より小さいが、パイプライン型のように変換処理を同時並行で行える場合はそれより早くなる。

時間方向の誤差
音声信号など、最終的にアナログ信号に復元するためのデジタル化のケースを考えると、サンプリングのタイミングのずれ（ジッター）も重要な誤差の要素になる。
入力信号の周波数が高いと、短い時間の間でも値が変化してしまい、誤差の要因になる。

電気記号
脚注
出典
関連項目

量子化 (情報科学)
デジタルマルチメータ


== 参考文献 ==
# オペアンプ

オペアンプ（operational amplifier，オペレーショナル・アンプリファイア）は、非反転入力端子（+）と反転入力端子（-）と、1つの出力端子を備えた増幅器の電子回路モジュールである。日本語では演算増幅器という。OPアンプなどと書かれることもある。増幅回路、コンパレータ、積分回路、発振回路など様々な用途に応用可能である。

概要
オペアンプは2つの入力間の電位差によって動作する差動増幅回路で、裸電圧利得は104倍から105倍と非常に高く、負帰還回路と組み合わせて適切な利得と動作を設定して用いる。回路構成は一般的に、正負入力を持つ差動入力段、中間増幅段、負荷を駆動する出力段に分かれる。
演算増幅器の名称は、かつて自動制御機能などを電子回路で実現する際、微積分・比較・加算・減算などをアナログ演算によって行うために開発されたことに由来する。なお、こうした演算回路を自由に組み合わせて接続し、各種リアルタイム演算ができるようにした装置をアナログコンピュータという。オペアンプは、モジュールとして考案された当初はトランジスタや真空管などの個別部品で構成され、のちに集積回路化された。

動作
オペアンプの差動入力は、非反転入力 (+) のV+ と 反転入力 (–) の V− から成り立つ。また、理想的なオペアンプは差動電圧入力と呼ばれる2つの電圧のみで成り立つ。
オペアンプの出力電圧Voutは以下の式となる。

  
    
      
        
          V
          
            out
          
        
        =
        
          A
          
            d
          
        
        
        (
        
          V
          
            
            +
          
        
        −
        
          V
          
            
            −
          
        
        )
      
    
    {\displaystyle V_{\text{out}}=A_{\text{d}}\,(V_{\!+}-V_{\!-})}
  

Adは開ループ増幅器の利得である。（「開ループ」(open-loop)とは出力から入力へのフィードバックループが存在しない回路である）

理論
入出力間の電圧には差動利得（オープンループゲイン）を
  
    
      
        
          A
          
            d
          
        
      
    
    {\displaystyle A_{\text{d}}}
  
として次のような関係がある。

  
    
      
        
          V
          
            out
          
        
        =
        
          A
          
            d
          
        
        (
        
          V
          
            +
          
        
        −
        
          V
          
            −
          
        
        )
      
    
    {\displaystyle V_{\text{out}}=A_{\text{d}}(V_{+}-V_{-})}
  

上記の関係を使って非反転増幅回路を計算する例を考える。

  
    
      
        
          R
          
            1
          
        
      
    
    {\displaystyle R_{1}}
  
の左から右へ流れる電流を
  
    
      
        
          I
          
            1
          
        
      
    
    {\displaystyle I_{1}}
  
とし、
  
    
      
        
          R
          
            2
          
        
      
    
    {\displaystyle R_{2}}
  
の右から左へ流れる電流を
  
    
      
        
          I
          
            2
          
        
      
    
    {\displaystyle I_{2}}
  
とする。この時オペアンプの入力インピーダンスは十分に大きく入力電流は無視し、出力インピーダンスは十分小さいとすると、以下の式が成り立つ。

  
    
      
        
          V
          
            in
          
        
        =
        
          V
          
            +
          
        
      
    
    {\displaystyle V_{\text{in}}=V_{+}}
  

  
    
      
        
          I
          
            1
          
        
        =
        −
        
          
            
              V
              
                −
              
            
            
              R
              
                1
              
            
          
        
      
    
    {\displaystyle I_{1}=-{\frac {V_{-}}{R_{1}}}}
  

  
    
      
        
          I
          
            2
          
        
        =
        
          
            
              
                V
                
                  out
                
              
              −
              
                V
                
                  −
                
              
            
            
              R
              
                2
              
            
          
        
      
    
    {\displaystyle I_{2}={\frac {V_{\text{out}}-V_{-}}{R_{2}}}}
  

  
    
      
        
          I
          
            1
          
        
        +
        
          I
          
            2
          
        
        =
        0
      
    
    {\displaystyle I_{1}+I_{2}=0}
  

  
    
      
        
          V
          
            out
          
        
        =
        
          A
          
            d
          
        
        (
        
          V
          
            +
          
        
        −
        
          V
          
            −
          
        
        )
      
    
    {\displaystyle V_{\text{out}}=A_{\text{d}}(V_{+}-V_{-})}
  

以上より入出力間の関係は

  
    
      
        
          
            
              V
              
                out
              
            
            
              V
              
                in
              
            
          
        
        =
        
          
            1
            
              
                
                  
                    R
                    
                      1
                    
                  
                  
                    
                      R
                      
                        1
                      
                    
                    +
                    
                      R
                      
                        2
                      
                    
                  
                
              
              +
              
                
                  1
                  
                    A
                    
                      d
                    
                  
                
              
            
          
        
      
    
    {\displaystyle {\frac {V_{\text{out}}}{V_{\text{in}}}}={\frac {1}{{\frac {R_{1}}{R_{1}+R_{2}}}+{\frac {1}{A_{\text{d}}}}}}}
  

またオペアンプの入力電圧は

  
    
      
        
          V
          
            +
          
        
        −
        
          V
          
            −
          
        
        =
        
          
            
              V
              
                out
              
            
            
              A
              
                d
              
            
          
        
        =
        
          
            
              V
              
                in
              
            
            
              
                A
                
                  d
                
              
              
                
                  
                    R
                    
                      1
                    
                  
                  
                    
                      R
                      
                        1
                      
                    
                    +
                    
                      R
                      
                        2
                      
                    
                  
                
              
              +
              1
            
          
        
      
    
    {\displaystyle V_{+}-V_{-}={\frac {V_{\text{out}}}{A_{\text{d}}}}={\frac {V_{\text{in}}}{A_{\text{d}}{\frac {R_{1}}{R_{1}+R_{2}}}+1}}}
  

となる。
  
    
      
        
          A
          
            d
          
        
      
    
    {\displaystyle A_{\text{d}}}
  
が
  
    
      
        (
        
          R
          
            1
          
        
        +
        
          R
          
            2
          
        
        )
        
          /
        
        
          R
          
            1
          
        
      
    
    {\displaystyle (R_{1}+R_{2})/R_{1}}
  
より十分大きければ、

  
    
      
        
          
            
              V
              
                out
              
            
            
              V
              
                in
              
            
          
        
        ≈
        1
        +
        
          
            
              R
              
                2
              
            
            
              R
              
                1
              
            
          
        
      
    
    {\displaystyle {\frac {V_{\text{out}}}{V_{\text{in}}}}\approx 1+{\frac {R_{2}}{R_{1}}}}
  

  
    
      
        
          V
          
            +
          
        
        −
        
          V
          
            −
          
        
        ≈
        0
      
    
    {\displaystyle V_{+}-V_{-}\approx 0}
  

となる。
上の式からわかることは、オペアンプの差動利得
  
    
      
        
          A
          
            d
          
        
      
    
    {\displaystyle A_{\text{d}}}
  
が大きい場合の回路の利得はオペアンプの利得に関係なく抵抗の比で決まること、またオペアンプの2つの入力電圧差は０となることである。つまり、

差動利得が大きく入力電流が小さいオペアンプで負帰還回路を形成した場合、その回路の伝達関数はオペアンプの利得には関係なく周りの素子定数で決まり、その際オペアンプは入力電圧差が０となるように（一般的にバーチャルショートと呼ばれる）出力電圧（または出力電流）を調整するように動作する
と言えることになる。

原理
中心となる回路は定電流回路（カレントミラー）で駆動されるLong-Tailed Pair (LTP)回路である。

特性
回路理論上は、「理想オペアンプ」と呼ばれる回路を想定する。

実際には理想的な特性は実現できず、たとえば以下のような値になる

差動利得：105 ～ 107オーダ
同相利得：10−5オーダ
入力インピーダンス：106～109Ωオーダ
出力インピーダンス：102Ωオーダ
周波数帯域：数MHz～数10MHz
このほか、オペアンプが動作するため加える電源電圧を上回る入出力電圧は扱えない、入力電圧のオフセットがあり、温度により変化するなどの制約がある。
しかし、こうした値が実現できれば、理想的な値からのずれを考慮しつつ所要の目的を得るように回路を設計することが可能である。
オペアンプICは入出力の機能や、必要とする電源、ピン配置などのパッケージングを標準化したものが多いので、設計作業の効率化に役立つ。またオペアンプICは、複数のオペアンプ回路を内蔵したものも広く普及している。

回路例
増幅回路
定常状態では、＋と－の入力端子の電圧が等しいか、入力端子に流れ込む電流がゼロとして、入力電圧と出力電圧の関係を導く事が出来る。
例：非反転増幅回路で、
  
    
      
        
          V
          
            in
          
        
        =
        {
        
          R
          
            1
          
        
        
          /
        
        (
        
          R
          
            1
          
        
        +
        
          R
          
            2
          
        
        )
        }
        
          V
          
            out
          
        
      
    
    {\displaystyle V_{\text{in}}=\{R_{1}/(R_{1}+R_{2})\}V_{\text{out}}}
  
 を 
  
    
      
        
          V
          
            out
          
        
      
    
    {\displaystyle V_{\text{out}}}
  
 で解くと下記項目にある式が得られる。
＋と－の入力端子の電圧が常に等しい（バーチャルショートと称する）ので、＋入力端子が接地されている場合は、－入力端子が接地されているとして、－入力端子に接続されている信号入力の入力インピーダンスを求める事が出来る。

非反転増幅回路
入力信号と出力信号の位相が同一である増幅回路。電圧増幅率は 
  
    
      
        1
        +
        
          R
          
            2
          
        
        
          /
        
        
          R
          
            1
          
        
      
    
    {\displaystyle 1+R_{2}/R_{1}}
  
 で表される。アナログスイッチ等を用いて増幅率（利得）を外部から設定できるようにした回路をプログラマブル・ゲイン・アンプという。また、
  
    
      
        
          R
          
            1
          
        
        =
        ∞
        ,
        
        
          R
          
            2
          
        
        =
        0
      
    
    {\displaystyle R_{1}=\infty ,\,R_{2}=0}
  
 として電圧増幅率を1とした回路をボルテージ・フォロワやユニティ・ゲイン・アンプと呼ぶ。

  また

反転増幅回路
入力信号に対して出力信号の位相が180°変化する増幅回路。電圧増幅率は 
  
    
      
        −
        
          R
          
            f
          
        
        
          /
        
        
          R
          
            
              i
              n
            
          
        
      
    
    {\displaystyle -R_{f}/R_{\rm {in}}}
  
で表され、絶対値として１倍未満にすることも可能である。入力電圧が常にグラウンド付近にあるため非反転増幅回路よりも特性が安定する。入力インピーダンスはほぼ
  
    
      
        
          R
          
            
              i
              n
            
          
        
      
    
    {\displaystyle R_{\rm {in}}}
  
となる。位相や入力インピーダンスが問題にならない場合に用いられる事が多い。

差動増幅回路
原則として
  
    
      
        
          R
          
            1
          
        
        =
        
          R
          
            2
          
        
        ,
        
        
          R
          
            f
          
        
        =
        
          R
          
            g
          
        
      
    
    {\displaystyle R_{1}=R_{2},\,R_{f}=R_{g}}
  
の条件で用いる。出力電圧は
  
    
      
        (
        
          V
          
            2
          
        
        −
        
          V
          
            1
          
        
        )
        
          R
          
            f
          
        
        
          /
        
        
          R
          
            1
          
        
      
    
    {\displaystyle (V_{2}-V_{1})R_{f}/R_{1}}
  
で表される。各入力にさらに非反転増幅回路（バッファアンプ）を設けた回路をインスツルメンテーション・アンプと呼び、計装用（工業用計測回路）に用いられる

演算回路
微分回路
電圧値の微分値を出力する回路。入力電圧
  
    
      
        
          V
          
            i
          
        
      
    
    {\displaystyle V_{i}}
  
に対して出力電圧は
  
    
      
        −
        R
        C
        d
        
          V
          
            i
          
        
        
          /
        
        d
        t
      
    
    {\displaystyle -RCdV_{i}/dt}
  
となる。実際には高周波のノイズ成分なども増幅されるため、出力波形の立ち下りを滑らかにする不完全微分回路を用いることが多い。

積分回路
電圧値の積分値を出力する回路。入力電圧
  
    
      
        
          V
          
            i
          
        
      
    
    {\displaystyle V_{i}}
  
に対して出力電圧は
  
    
      
        −
        1
        
          /
        
        R
        C
        ∫
        
          V
          
            i
          
        
        d
        t
      
    
    {\displaystyle -1/RC\int V_{i}dt}
  
となる。実際には、基準となる時刻からの積分を求めるためコンデンサの電荷を放電するリセット回路を設けることが多い。

加算回路
複数の入力電圧を加算した値を出力する回路。入力電圧
  
    
      
        
          V
          
            1
          
        
        ,
        
          V
          
            2
          
        
        ,
        ⋯
        ,
        
          V
          
            n
          
        
      
    
    {\displaystyle V_{1},V_{2},\cdots ,V_{n}}
  
に対して出力電圧は
  
    
      
        −
        (
        
          V
          
            1
          
        
        
          /
        
        
          R
          
            1
          
        
        +
        
          V
          
            2
          
        
        
          /
        
        
          R
          
            2
          
        
        +
        ⋯
        +
        
          V
          
            n
          
        
        
          /
        
        
          R
          
            n
          
        
        )
        
          R
          
            f
          
        
      
    
    {\displaystyle -(V_{1}/R_{1}+V_{2}/R_{2}+\cdots +V_{n}/R_{n})R_{f}}
  
となる。ただしオペアンプの最大出力電圧（定格）を超えることはできない。オペアンプのオープンループゲインが十分に大きいことと、前段の出力インピーダンスが十分に小さいことが必要条件。

種類
世界最初のモノリシックICオペアンプは1960年代にフェアチャイルドセミコンダクターから発表されたμA702である。その数年後に発表されたμA741は、セカンドソースや改良型を含めると30年以上にもわたって現役で使用されている。
現在主に用いられているオペアンプICには次のような種類がある。

用途別分類
さまざまな用途に使用できる汎用オペアンプのほか、特定の用途向けに改良されたオペアンプが開発されている。

汎用オペアンプ
価格と使いやすさを優先した仕様となっている品種。突出した特性を持たないようにすることで汎用性を確保している。フェアチャイルドセミコンダクター社のμA741、ナショナル セミコンダクター社のLM301Aがその走りで、後に汎用としては低雑音広帯域のRC4558(レイセオン)、FET入力のTL07x(テキサス・インスツルメンツ)などが登場した。LM358,324(ナショナル セミコンダクター)といった単電源タイプもある。特性では、一般に正負二電源を使うタイプの方が単電源タイプよりも良いが、最近は単電源タイプの物でも性能がよい物が開発され、品種が少しずつ増えてきている。
高精度オペアンプ
ミリボルト単位の微小電圧（熱電対など）を増幅するための品種。絶対的なオフセット電圧やドリフト特性に優れるバイポーラ入力のものと、差動入力インピーダンス不平衡によるオフセット電圧の発生に強いFET入力のものがあり、用途により選択する。多くは裸利得が大きい。アナログ・デバイセズ社のOP07が有名。
ローノイズオペアンプ
その名の通りノイズを嫌う用途向けの特性を持つオペアンプ。
オーディオオペアンプ
ローノイズオペアンプのうち、オーディオ用に広帯域・低歪率を実現した品種。メーカーによってはその中から特に低雑音のものを選別している場合もある。シグネティクスのNE5532、新日本無線のNJM4580、MUSESシリーズ、TIのOPA627、OPA1612などが著名。
微小電流オペアンプ
電離箱の出力やフォトダイオードの出力、電荷の測定などの微小電流を扱う用途に用いる品種。入力電流がfA（フェムトアンペア）オーダーの製品もある。このタイプの製品はほとんどがFET入力である。
高速オペアンプ
ビデオ信号の増幅など高周波（VHF）まで使用できる品種。GB積、スルーレートを特別に高くしてある。反面、多くの場合安定性や直流特性は劣り、裸利得は低い。
パワーオペアンプ
大電力が扱えるオペアンプ。ナショナル セミコンダクター社のLM12が代表例である。原則として放熱処理が必要である。
ローパワーオペアンプ
消費電流を非常に小さくした品種。ナショナル セミコンダクター社のLF442やテキサス・インスツルメンツ社のTL022、TL06xなどが古典的代表だが、現在ではこの分野に適しているCMOS製品の開発が盛んである。
レール・ツー・レール (Rail-To-Rail) 動作オペアンプ
入力電圧と出力電圧の両方、あるいはどちらか片方の範囲が電源電圧まで動作可能な品種。
完全差動オペアンプ
入力、出力ともに差動のオペアンプで、入力、出力ともに正負の端子がある。単体部品としては一部の平衡伝送用ビデオアンプ等にとどまり品種が少ないが、集積回路内では頻繁に使われる。
ディスクリートオペアンプ
オーディオ用途として、モノリシックICの音が好ましくないとされる場合や、市販品において他製品との差別化のためにオペアンプと同様の回路をディスクリート部品を用い構成する場合がある。モノリシックICと比べ素子のばらつきや配線の寄生容量や混変調などにより諸特性、特に歪み率が悪化し、またノイズ耐性が劣るため音質以外の面では採用する理由はほとんどない。

入力段トランジスタによる分類
内部の差動増幅回路で入力段に用いられるトランジスタの種類により大きく3種に分けられる。

バイポーラ入力
入力段がバイポーラトランジスタで構成されているオペアンプ。
FETにくらべ素子特性のばらつきが少なく、入力オフセット電圧が小さい。
入力バイアス電流が大きい。このため正負入力のインピーダンスがそろっていないと、低オフセットの品種でも大きなオフセット電圧が発生する。
電圧性ノイズ特性に優れる。
JFET入力
入力段に接合型FETを使用したオペアンプ。
入力インピーダンスが高い。
入力バイアス電流がとても小さいか、またはほとんど流れない。正負入力のインピーダンスがそろっていなくても、あまり大きなオフセット電圧は生じない。しかしJFETは素子特性のばらつきが大きく、絶対的な入力オフセット電圧はバイポーラ入力のものに比べ大きい。
スルーレートを比較的高くしやすい。
MOS入力
入力段にMOSFETを使用したオペアンプ。
入力インピーダンスが極めて高い。
入力バイアス電流がほとんど流れない。正負入力のインピーダンスがそろっていなくても、オフセット電圧はほとんど生じない。しかしMOSFETはJFET以上に素子特性のばらつきが大きく、絶対的な入力オフセット電圧は劣るものが多い。
雑音特性が悪い物が多い。ただし新しい製品では改善が顕著である。
さらに、それぞれ差動入力部のトランジスタの極性がNPN（FETならNチャネル）、PNP（FETならPチャネル）、あるいは両方の並列となっているものがあり、それぞれ入力電流の向きが異なる。

半導体製造プロセスによる分類
オペアンプの回路タイプの違いで3種に分かれる。混同されやすいが、入力トランジスタの違いとは異なる。

バイポーラ
全てバイポーラトランジスタ、または入力段がJFETのオペアンプが当てはまる。全てJFETで構成されたオペアンプは基本的には無く、出力段にはもっぱらバイポーラトランジスタが使われる。
CMOS
入力部から出力部まで全てMOSFETで構成されたオペアンプが当てはまる。消費電力が小さく、動作電圧が低いものが多い。
BiMOS
バイポーラトランジスタとMOSFETを併用する設計のオペアンプが当てはまる。MOSFETをpMOSとnMOSの両方使っている場合はBiCMOSとなる。バイポーラトランジスタとMOSFETの長所を組み合わせた製品とすることが出来るが、製造コストが上がる。

位相補償の有無
オペアンプが負帰還で安定して増幅動作をするためには高域での位相補償容量が必要である。この位相補償はボルテージ・フォロワ動作時（利得1倍）に最も多く必要となる。現在広く使われているオペアンプICのほとんどは、ボルテージ・フォロワでも安定動作が出来るだけの位相補償がなされている。しかし、補償容量を大きくすると周波数特性、スルーレートが犠牲になるため、高利得用途向けの品種など、限定位相補償として高速・広帯域とする代わりにある程度の閉ループ利得を持つ回路でのみ安定動作するものもある。また、補償容量を内蔵せず用途に応じて最適な補償容量を外付けして使う非補償オペアンプもある。

その他
外付け抵抗によりオフセット電圧の調整が可能なもの、過熱時に自動停止するもの、入力部に保護ダイオードを内蔵するもの、無信号時に消費電力を下げる機能のあるものなど、追加の機能が付いたオペアンプICが多数開発されている。

脚注
注釈

出典

参考文献
藤原修『インタフェースの電子回路入門 改訂2版』オーム社、1999年。ISBN 978-4-274-08680-9。

関連項目
利得
スルー・レート
GB積
分圧回路
ボブ・ワイドラー
差動増幅回路

外部リンク
OPアンプの基礎 - ウェイバックマシン（2018年7月23日アーカイブ分）
演算増幅器
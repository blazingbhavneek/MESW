# コンピュータ数値制御

コンピュータ数値制御（コンピュータすうちせいぎょ）またはCNC（英語: computerized numerical control）は、機械工作において工具の移動量や移動速度などをコンピュータによって数値制御することである。同一の加工手順の繰り返しや、複雑な形状の加工を得意としており、今日では多くの工作機械で採用されている。
CAD/CAMプログラムと連携することで設計段階から製造までの高度な自動化が可能となっている。CAD/CAMプログラムが生成したファイルを特定工作機械の操作に必要なコマンド列に変換し、CNC工作機械にロードして製造を行う。日本ではNC旋盤やマシニングセンタを中心として加工手順の記述に「Gコード」と呼ばれる一種のプログラム言語を用いるのが主流となっている。

歴史
数値制御の登場によって、作業者の熟練度に依存せずに同じ品質の製品を大量に生産することや、自動運転による連続運転が実現するようになったが、作業指示の入力方法は、紙テープやパンチカードであり、以下のような問題点を抱えていた。

複雑な加工への対応の難しさ
入力指示後、加工前に完成品形状の確認が行えない
紙テープやパンチカード破損による作り直し
そこで、加工パスを数値情報に置き換え、それをNC機械に入力して工具を動作させる方法が考え出された。
NCの研究は、1947年にマサチューセッツ工科大学（MIT）のサーボ機構研究所で始まり、1952年にはNCフライス盤が開発され、基礎研究が始まった。その後、コンピュータ技術の進歩に伴って、徐々に既存のNC機械からCNC機械へと発展していった。今では、CNCではないNC工作機械はほとんど存在しない。しかし、製造の現場ではCNCという表現はあまり用いられず、CNC加工・CNC機械についてもNC加工・NC機械と表現されることが多い。
初期のCNC装置は、数値情報を入力しても結果の事前確認ができず、旧来のNC工作機械と同様に、発泡スチロールなどのダミーを用意したり、工具先にペンを取り付けて加工パスを描かせる事で結果を確認していた。しかしながら、曲線、曲面といった複雑な形状を数値で定義できたことにより、加工に対する自由度は格段に向上した。
コンピュータ上での画像処理技術が向上するにつれ、工作機械に外部のディスプレイを接続したり、本体にディスプレーを備える機械が登場し、事前に加工情報の確認が行えるようになっていた。
コンピュータ支援設計（CAD）が進歩するにつれ、CADで作成された製品データをもとにNC機械の加工情報を作成するコンピュータ支援製造（CAM）も発達し、工作機械から遠く離れたコンピュータの画面上で加工情報の作成や確認が行えるようになった。また、工作機械の進歩に伴い、複雑な三次元形状の高精度な加工が高速で行えるようになった。
CAD/CAMとの連携、複雑な三次元加工を実現する工作機械の登場により、CNCの適用範囲はさらに拡大することとなった。特に、高精度かつ複雑な加工が実現できるようになるにつれ、金型や治具といった量産品ではない一品一様に近い代物の製造に多く適用されている。

CNCの登場
1952年に始まったMITでのプロジェクトでは、試験的部品を作るコマンド列の多くは人間が手でプログラミングし、入力として使う紙テープを生成していた。そこでジョン・ラニアンはWhirlwindを使ってコンピュータ制御で工作機械用紙テープを作るための各種サブルーチンを作成した。利用者が一連の点と速度を入力すると、プログラムによって紙テープが生成される。これにより、紙テープ作成と部品加工までを含めた作業にかかる時間は8時間から15分へと削減された。これに基づき、空軍に対して数値制御等の汎用プログラミング言語開発の提案をし、それが1956年6月に受理された。
同年9月、ダグラス・テイラー・ロスらは点と線をベースとして工作機械を制御する言語の概要を完成させ、その後数年かけて APT（アプト） という言語を開発した。1957年、アメリカ航空宇宙工業会（AIA）とライト・パターソン空軍基地の空軍兵站軍団はMITと共同で完全コンピュータ制御のNCシステムのための標準策定を行った。1959年2月25日、3者共同でその成果を発表し、その席で記者たちにCNC工作機械で作ったアルミニウム製の灰皿を配布した。
同じ頃、ゼネラル・エレクトリック（GE）のパトリック・ハンラッティは Giddings and Lewis Machine Tool Co.（G&L）の Numericord を使って同様の開発を行っていた。彼が開発した言語 PRONTO は1958年にリリースされ、APTと競合することになった。ハンラッティはその後、小切手などで使われている磁気インク文字認識（MICR）を開発し、更に後にはゼネラルモーターズに移りDAC-1という有名なCADシステムを開発した。
APT はすぐに 2D-APT-II に拡張され、曲線を使えるようになった。そのリリース後、MIT は CNC よりも CAD に研究の重点を置くようになった。APTの開発はサンディエゴのAIAに継承され、1962年にはイリノイ工科大学に受け継がれた。APTを USASI X3.4.7 として国際標準にする作業が1963年に始まったが、CNC工作機械のメーカーはそれぞれ独自の拡張を行っていたため、標準化は1968年までかかり、基本システムに25の追加オプション機能を付随させることになった。
APT がリリースされた1960年代初期ごろ、トランジスタを使った第2世代のコンピュータが登場し、製造現場においてもさらに大量の情報を処理できるようになっていった。CNC工作機械のコストは1960年代半ばには非常に低減されたため、航空機メーカーのコンピュータ時間の3分の1はAPTの実行で占められるようになった。

CADとCNC
MITのサーボ機構研究所が最初のNC工作機械を開発していた一方で、1953年MITの機械工学科は製図の授業を必修科目から外した。製図を教えていた講師らはデザイン部門に移籍し、そこでコンピュータによる設計についての議論が始まった。同じころサーボ機構研究所を改称した電子システム研究所では、設計図を紙に書くことが将来どうなるのかが議論されていた。
1959年1月、電子システム研究所と機械工学科のデザイン部門の間で非公式の会合が行われた。4月と5月には公式の会議が開催され「Computer-Aided Design Project」の立ち上げが決まった。1959年12月、空軍は1年間の契約でこのプロジェクトに22万3000ドルを資金提供し、そのうち20,800ドルは1時間200ドルのコンピュータ利用104時間分に充てられた。この野心的プログラムは1年程度では完成せず、1965年3月、技術計算システムAED（Automated Engineering Design）がリリースされた。
1959年、ゼネラルモーターズは各デザイン部門が生み出す多数のデザインスケッチをデジタイズし、記録し、印刷するという実験的プロジェクトを開始した。基本概念はうまく機能することが判明したため、GMはIBMと共に製品版を開発するDAC-1プロジェクトを開始した。DACプロジェクトには、2次元の設計図を3次元モデルに直接変換し、その3次元モデルをAPTのコマンド列に変換してCNC工作機械で部品を切り出すという目標もあった。1963年11月、トランクの蓋の設計を初めて2次元の紙から3次元のプロトタイプに移行した。最初のスケッチ以外は、設計から生産まで全てコンピュータ化された。
そのころMITのリンカーン研究所ではトランジスタを全面的に使ったコンピュータを構築するプロジェクトが行われていた。最終目標は Whirlwind をトランジスタ化したTX-2だが、回路設計の評価のため小型版のTX-0を最初に製作した。TX-2の製作が始まるとTX-0は自由に使えるようになり、グラフィックスを表示できるブラウン管のディスプレイと対話型入力機能を使って様々な実験が行われた。その後の開発をアイバン・サザランドが行い、TX-2上のSketchpadとして結実した。
サザランドは Sketchpad を完成させるとユタ大学に移ったが、MITの大学院生らはこれに触発されて世界初の真のCADシステム「Electronic Drafting Machine」（EDM）を開発した。EDMはコントロール・データ・コーポレーションが買い取り「Digigraphics」の名で発売。ロッキードはこれを使って C-5 ギャラクシーの部品を設計した。初期のCAD/CNC製造システムの一例である。
1970年までに、CDCやIBMといった大企業以外に インターグラフ・アプリコン・コンピュータービジョン・UGSといったCAD企業がいくつも誕生している。

CNCの実用化
ミニコンピュータの登場と普及により、コンピュータ利用コストは1960年代に劇的に低下した。最終的にサーボ機構でモーターを制御するよりも、コンピュータプログラムで制御したほうが安くつくようになった。工作機械に小型コンピュータを専用に接続することで、工程全体を行えるようになった。PDP-8 や Nova といったコンピュータがそうした用途でよく使われた。1970年代にはマイクロプロセッサが登場しさらに実装コストが下がっていった。今日のCMC工作機械は何らかのマイクロプロセッサを必ず使用している。
CNC工作機械の低価格化は産業界を一変させた。曲線でも直線でも自由自在に切断でき、複雑な形状でも容易に製造できるようになり、製造にあたって人手を介する必要のある部分も減っていった。CNCを使った製造工程の自動化部分が増えるにつれ、品質も向上していった。
1970年代初期、西側経済の成長速度が鈍って労働賃金が上昇したため、CNCが更に広まるようになった。アメリカでは低コストのCNCシステムの需要にメーカーがなかなか応えられず、その隙間をドイツのメーカーが埋めることになった。1979年、ドイツのメーカーの販売額がアメリカのメーカーを凌ぐようになった。1980年代にも同様のサイクルが繰り返され、日本のメーカーが首位になった。販売額上位10社のチャートを見てみると、1971年にはアメリカの企業が独占していたが、1987年には Cincinnati Milacron が8位となっている以外は日本のメーカーが占めていた。
多くの研究者は、1970年代初めの景気悪化で低価格CNCシステムの需要が増したとき、アメリカのメーカーはハイエンドの開発に集中していたために競争力を低下させたと見ている。高収益な航空機産業に的を絞ったアメリカのメーカーとは異なり、ドイツと日本のメーカーは当初から低収益な産業をターゲットとしていたため、容易にその市場に参入することができた。

現状
データ記憶媒体の主流は紙テープからそれ以外に移行したが、CNCシステムでは紙テープが比較的よく使われ続けている。これは、既存の紙テープの資産を別のフォーマットに置き換えるよりも、紙テープリーダーを装置に接続するほうが簡単だったためである。工作機設置雰囲気が高油脂・溶剤雰囲気・高磁場・高電圧などであった為、それらに侵されにくいテープ形式が主流たりえた事情もある。ただし紙ではなく、もっと耐久性のあるポリエステルのフィルム（マイラー）を使ったテープが主流となった。フロッピーディスク・USBメモリ・LANなどもデータ入力手段として使われている。
CNCが普及すると、APTのようにライセンス問題のない新たな標準が必要とされるようになった。そこでプロッタで使用されていたマークアップ言語などをベースとした標準がいくつか登場した。そのうちガーバー・サイエンティフィックのプロッタで使われていたGコードが特に広く普及していった。このファイルフォーマットは非常に一般化したため、EIA規格となった。また、工作機械メーカーはGコード以外の独自のプログラミング方法を開発しているところもある（ヤマザキマザックの Mazatrol など）。
最近では、パラメトリックプログラミング（マクロプログラミング）と呼ばれる論理コマンドをサポートするCNCインタプリタも登場している。パラメトリックプログラムには、装置制御コマンドと同時にBASIC風の制御言語が含まれている。if文、ループ、サブルーチン、各種算術演算、変数などが使え、プログラムの自由度が向上している。
売上では、ファナック（FANUC）が世界首位（世界シェア5割、国内シェア7割）である。

特徴
最近のCNC工作機械も1952年にMITで開発されたものと基本的には変わっていない。台がX軸およびY軸方向に動き、工具部分がZ軸方向に動く。工具の位置は位置精度を高めるためにモーターに減速歯車をつけた装置で駆動されるか、最近ではステッピングモーターによる直接駆動である。
制御装置の進化と共に、工作機械も進化してきた。例えば、安全性を高めるため、機械全体を大きな箱で覆うようになってきた。最近のCNCシステムの多くは完全電子制御になっている。
CNCは、一連の動きと操作で記述できる任意の工程で使われている。例えば、レーザー切断・溶接・摩擦攪拌接合・超音波溶接・プラズマ切断・曲げ加工・へら絞り加工など、様々な場面で利用されている。

CNCの主な適用範囲
大量生産品
切削加工による工業製品
自動車エンジン用部品
小量生産品
精度を要求される加工
自動車用金型
速さを要求される加工
携帯電話用金型

CNC工作機械の主な種類
放電加工
旋盤
フライス盤
CNCリューター
板金（タレットパンチプレス）
フォームカッター
プラズマ切断
ウォータージェット
レーザ切断
研削盤（平面、円筒）
パイプベンダー

愛好家向けCNC工作機械
近年では小型のCNCが開発されている。これは特にアメリカ国立標準技術研究所（NIST）のEMC（LinuxCNC）プロジェクトの寄与するところが大きい。EMCはLinux上で動作するパブリックドメインのソフトウェアであり、パーソナルコンピュータ上でも使える。NISTのプロジェクト終了後もEMC2を中心として開発が継続されており、GPLおよびLGPLでライセンスされている。元々のEMCソフトウェアをベースとして商用のPC向けソフトウェアも販売され、DIY的CNCの開発に使用してオープンソースハードウェア設計を使った趣味のCNC工作機械の自作が行われている。同じ基本アーキテクチャを使い、Sherline や Taig といった企業が小型軽量のCNC工作機械を発売してきた。PCを使用したCNCにはTurboCNCやKCam、Mach3、Mach4等がある。これらを産業用ではない通常の電波障害や誘導障害への対策が十分ではないPCでCNC装置として使用する場合にはアーク溶接や放電加工機等からの高周波雑音によって誤作動する可能性があるので使用時には注意が必要である。
1996年12月にローランド ディー. ジー.から3DプロッタMODELA model MDX-3が発売され、1997年に3DスキャナーのPICZA（ピクザ）model PIX-3が発売されたことにより、数値制御工作機械での加工、3Dデータの座標入力の敷居が大幅に下がった事で一部の愛好家の間で部品類の製造に用いられ、モデルグラフィックスやモデル・カーズの誌面でも取り上げられた。
二足歩行ロボットの製作がブームになるのと相前後して、既存のフライス盤、旋盤を改造してCNC制御をおこなう試みが流行し、インターネット上で様々な情報が発信されるようになった。フリーあるいは廉価なPC用のCNCソフトウェアとサーボモーター及び制御基板等を既存の工作機械に取り付けることでCNC化をおこなうものであり、加工範囲や能力は限られるものの極めて廉価でCNC工作機械を調達することが可能になったことから、ロボット製作者や工作少年等を中心としたブームとなっている。

歌
北朝鮮の電子楽団に、「突破せよ最先端を」という曲がある。歌詞にCNCの名が出ており、全体を通してCNCによる、経済・工業のさらなる飛躍を謳っている。

脚注
注釈
出典
参考文献
RossDouglas「Origins of the APT language for automatically programmed tools」『ACM SIGPLAN Notices』第13巻、第8号、61-99頁、1978年8月。https://web.archive.org/web/20050215043631/http://ied.unipr.it/silve/meaz/origini-APT.pdf。 
Olexa, Russ (August 2001), “The Father of the Second Industrial Revolution”, Manufacturing Engineering 127 (2), http://www.sme.org/cgi-bin/find-articles.pl?&01aum042&ME&20010802&&SME& 
Krull, F.N. (1994-Fall 1994 ), “The origin of computer graphics within General Motors”, Annals of the History of Computing (IEEE) 16 (3):  40

関連項目
製造に関する記事一覧
CAD - CAE - CAM
ガーバーフォーマット
ファクトリーオートメーション

外部リンク
『CNC』 - コトバンク